// åœ°ä¸‹åŸæ¸¸æˆ
//
//
// ä¸€äº›æ¶é­”æŠ“ä½äº†å…¬ä¸»ï¼ˆPï¼‰å¹¶å°†å¥¹å…³åœ¨äº†åœ°ä¸‹åŸçš„å³ä¸‹è§’ã€‚åœ°ä¸‹åŸæ˜¯ç”± M x N ä¸ªæˆ¿é—´ç»„æˆçš„äºŒç»´ç½‘æ ¼ã€‚æˆ‘ä»¬è‹±å‹‡çš„éª‘å£«ï¼ˆKï¼‰æœ€åˆè¢«å®‰ç½®åœ¨å·¦ä¸Šè§’çš„æˆ¿é—´é‡Œï¼Œä»–å¿…é¡»ç©¿
//è¿‡åœ°ä¸‹åŸå¹¶é€šè¿‡å¯¹æŠ—æ¶é­”æ¥æ‹¯æ•‘å…¬ä¸»ã€‚
//
// éª‘å£«çš„åˆå§‹å¥åº·ç‚¹æ•°ä¸ºä¸€ä¸ªæ­£æ•´æ•°ã€‚å¦‚æœä»–çš„å¥åº·ç‚¹æ•°åœ¨æŸä¸€æ—¶åˆ»é™è‡³ 0 æˆ–ä»¥ä¸‹ï¼Œä»–ä¼šç«‹å³æ­»äº¡ã€‚
//
// æœ‰äº›æˆ¿é—´ç”±æ¶é­”å®ˆå«ï¼Œå› æ­¤éª‘å£«åœ¨è¿›å…¥è¿™äº›æˆ¿é—´æ—¶ä¼šå¤±å»å¥åº·ç‚¹æ•°ï¼ˆè‹¥æˆ¿é—´é‡Œçš„å€¼ä¸ºè´Ÿæ•´æ•°ï¼Œåˆ™è¡¨ç¤ºéª‘å£«å°†æŸå¤±å¥åº·ç‚¹æ•°ï¼‰ï¼›å…¶ä»–æˆ¿é—´è¦ä¹ˆæ˜¯ç©ºçš„ï¼ˆæˆ¿é—´é‡Œçš„å€¼ä¸º 0ï¼‰ï¼Œè¦ä¹ˆ
//åŒ…å«å¢åŠ éª‘å£«å¥åº·ç‚¹æ•°çš„é­”æ³•çƒï¼ˆè‹¥æˆ¿é—´é‡Œçš„å€¼ä¸ºæ­£æ•´æ•°ï¼Œåˆ™è¡¨ç¤ºéª‘å£«å°†å¢åŠ å¥åº·ç‚¹æ•°ï¼‰ã€‚
//
// ä¸ºäº†å°½å¿«åˆ°è¾¾å…¬ä¸»ï¼Œéª‘å£«å†³å®šæ¯æ¬¡åªå‘å³æˆ–å‘ä¸‹ç§»åŠ¨ä¸€æ­¥ã€‚
//
//
//
// ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—ç¡®ä¿éª‘å£«èƒ½å¤Ÿæ‹¯æ•‘åˆ°å…¬ä¸»æ‰€éœ€çš„æœ€ä½åˆå§‹å¥åº·ç‚¹æ•°ã€‚
//
// ä¾‹å¦‚ï¼Œè€ƒè™‘åˆ°å¦‚ä¸‹å¸ƒå±€çš„åœ°ä¸‹åŸï¼Œå¦‚æœéª‘å£«éµå¾ªæœ€ä½³è·¯å¾„ å³ -> å³ -> ä¸‹ -> ä¸‹ï¼Œåˆ™éª‘å£«çš„åˆå§‹å¥åº·ç‚¹æ•°è‡³å°‘ä¸º 7ã€‚
//
//
//
// -2 (K)
// -3
// 3
//
//
// -5
// -10
// 1
//
//
// 10
// 30
// -5 (P)
//
//
//
//
//
//
// è¯´æ˜:
//
//
// éª‘å£«çš„å¥åº·ç‚¹æ•°æ²¡æœ‰ä¸Šé™ã€‚
// ä»»ä½•æˆ¿é—´éƒ½å¯èƒ½å¯¹éª‘å£«çš„å¥åº·ç‚¹æ•°é€ æˆå¨èƒï¼Œä¹Ÿå¯èƒ½å¢åŠ éª‘å£«çš„å¥åº·ç‚¹æ•°ï¼ŒåŒ…æ‹¬éª‘å£«è¿›å…¥çš„å·¦ä¸Šè§’æˆ¿é—´ä»¥åŠå…¬ä¸»è¢«ç›‘ç¦çš„å³ä¸‹è§’æˆ¿é—´ã€‚
//
//
// Related Topics æ•°ç»„ åŠ¨æ€è§„åˆ’ çŸ©é˜µ ğŸ‘ 704 ğŸ‘ 0
/**
 *
 *   0     1     2
 *  -2       [-5,-5]         [-5,-2]
 *  -7       [-15,-15]       [-5,-1]
 *  [-7,3]   [-7,33]         []
 *
 * v[i,j]:å†å²æœ€ä½è¡€é‡
 * p[i,j]:å½“å‰å‰©ä½™è¡€é‡
 * p[i,j]ä¸Šè¿˜æ˜¯å³:Math.max(ä¸¤è¾¹æœ€ä½)
 *
 */

//leetcode submit region begin(Prohibit modification and deletion)
function calculateMinimumHP(dungeon: number[][]): number {
  const m = dungeon.length;
  const n = dungeon[0].length;
  // å†å²æœ€ä½è¡€é‡
  const v: number[][] = new Array(m).fill(1).map((p) => new Array(n).fill(0));
  // å½“å‰å‰©ä½™è¡€é‡
  const p: number[][] = new Array(m).fill(1).map((p) => new Array(n).fill(0));
  // å‡è®¾ä»0å¼€å§‹
  p[0][0] = v[0][0] = dungeon[0][0];
  // åˆå§‹åŒ–é¦–è¡Œå’Œé¦–åˆ—
  for (let i = 1; i < n; i++) {
    p[0][i] = dungeon[0][i] + p[0][i - 1];
    v[0][i] = Math.min(v[0][i - 1], p[0][i]);
  }
  for (let i = 1; i < m; i++) {
    p[i][0] = dungeon[i][0] + p[i - 1][0];
    v[i][0] = Math.min(v[i - 1][0], p[i][0]);
  }

  for (let i = 1; i < m; i++) {
    for (let j = 1; j < n; j++) {
      //ä»ä¸Šåˆ°è¾¾
      const p1 = p[i - 1][j] + dungeon[i][j]; //å‰©ä½™è¡€é‡
      const v1 = Math.min(v[i - 1][j], p1); //å†å²æœ€ä½è¡€é‡
      //ä»å·¦åˆ°è¾¾
      const p2 = p[i][j - 1] + dungeon[i][j];
      const v2 = Math.min(v[i][j - 1], p2);
      // å‰©ä½™è¡€é‡å¤š å†å²æœ€ä½è¡€é‡å¤š
      if (v1 > v2 && p1 > p2) {
        p[i][j] = p1;
        v[i][j] = v1;
      }
      // å‰©ä½™è¡€é‡å°‘ï¼Œå†å²æœ€ä½è¡€é‡å¤š
      // å‰©ä½™è¡€é‡ > å†å²æœ€ä½è¡€é‡
      // å› æ­¤

      /**
       *        -6,2->
       *   4,1   (0)
       */
    }
  }
  return Math.max(1 - v[m - 1][n - 1], 1);
}
// console.log(
//   calculateMinimumHP([
//     [-2, -3, 3],
//     [-5, -10, 1],
//     [10, 30, -5],
//   ]) === 7
// );
// console.log(
//   calculateMinimumHP([
//     [3, -3, 3],
//     [4, -10, 1],
//     [10, 30, -5],
//   ]) === 1
// );
// console.log(
//   calculateMinimumHP([
//     [3, -3, 3],
//     [4, -10, 1],
//     [10, 30, -5],
//   ]) === 1
// );
console.log(
  calculateMinimumHP([
    [1, -3, 3],
    [0, -2, 0],
    [-3, -3, -3],
  ]) === 3
);
const d1 = [
  [1, -3, 3],
  [0, -2, 0],
  [-3, -3, -3],
];
// å½“å‰æœ€ä½è¡€é‡
const b1 = [
  [1, -2, 1],
  [1, -1, 0],
  [-2, -3, -3],
];
// å†å²æœ€ä½è¡€é‡
const v1 = [
  [1, -2, -2],
  [1, -1, 0],
  [-3, -3, -3],
];
// todo: å†å²è¡€é‡æ›´é«˜ï¼Œä½†å½“å‰è¡€é‡æ›´ä½ï¼Œå¦‚ä½•é€‰æ‹©
// å–å†³äºåç»­çš„æ‰£è¡€æƒ…å†µï¼Œå¦‚æœæ‰£è¡€è¾ƒå¤šï¼Œéœ€è¦æ ¹æ®æ‰£è¡€é‡å’Œå½“å‰è¡€é‡ç»¼åˆè€ƒè™‘
// å›æº¯æœ€ä½
const r1 = [
  [-2, -3, 0],
  [-5, -5, -3],
  [-9, -6, -3],
];

// å›æº¯æœ€ä½
const r1 = [
  [-2, 0, -9],
  [-2, -8, 9],
  [-3, -2, 0],
];
// å›æº¯æœ€ä½
const r1 = [
  [1, 1, 0],
  [-1, 1, 9],
  [-5, -2, 0],
];

console.log(
  calculateMinimumHP([
    [5, -8, 2],
    [0, -3, 0],
    [-3, -15, -5],
  ]) === 3
);

//3
const d = [
  [5, -9, -2, -2],
  [0, -4, -3, 1],
  [-3, -9, -3, -1],
];
const b = [
  [5, -4, -6, -8],
  [5, 1, -3, 1],
  [2, -9, -2, -1],
];
//leetcode submit region end(Prohibit modification and deletion)
